@model AdminDashboardDTO
@using PetConnect.BLL.Services.DTO
@using PetConnect.BLL.Services.DTO.Doctor
@using PetConnect.BLL.Services.DTO.PetDto
@using PetConnect.BLL.Services.DTOs.Admin
@using PetConnect.DAL.Data.Enums

@{
    Layout = "_NewLayout";
}

<section class="section">
    <div class="container text-center">
        <h2 class="mb-4">Admin Dashboard</h2>
        <p class="mb-5">Review and approve pending doctors and pets.</p>
    </div>
</section>

<!-- Doctors Section -->
<section class="section bg-light">
    <div class="container">
        <div class="section-title text-center">
            <h3>Pending Doctors</h3>
            <p>Review doctors awaiting approval.</p>
        </div>

        @if (!Model.PendingDoctors.Any())
        {
            <div class="alert alert-success text-center">
                All doctors are approved.
            </div>
        }
        else
        {
            <div class="row g-4">
                @foreach (var doctor in Model.PendingDoctors)
                {
                    <div class="col-md-6 col-lg-3" data-aos="zoom-in">
                        <div class="team-card text-center">
                            <div class="team-image">
                                <img src="@doctor.ImgUrl" class="img-fluid" alt="Dr. @doctor.FName @doctor.LName" />
                                <div class="team-overlay">
                                    <p>
                                        @doctor.PetSpecialty specialist<br />
                                        Rate: <strong>@doctor.PricePerHour.ToString("F2") EGP/hr</strong>
                                    </p>
                                </div>
                            </div>
                            <div class="team-content">
                                <h4>
                                    <a asp-controller="Doctors" asp-action="Profile" asp-route-id="@doctor.Id" class="text-decoration-none text-dark">
                                        Dr. @doctor.FName @doctor.LName
                                    </a>
                                </h4>
                                <span class="position">@doctor.PetSpecialty</span>

                                <form asp-action="ApproveDoctor" asp-controller="Admin" method="post" class="mt-2">
                                    @Html.AntiForgeryToken()
                                    <input type="hidden" name="id" value="@doctor.Id" />
                                    <button type="submit" class="btn btn-success btn-sm">Approve</button>
                                </form>
                            </div>
                        </div>
                    </div>
                }
            </div>
        }
    </div>
</section>

<!-- Pets Section -->
<section class="section">
    <div class="container">
        <div class="section-title text-center">
            <h3>Pending Pets</h3>
            <p>Review pets awaiting adoption approval.</p>
        </div>

        @if (!Model.PendingPets.Any())
        {
            <div class="alert alert-success text-center">
                All pets are approved.
            </div>
        }
        else
        {
            <div class="row g-4">
                @foreach (var pet in Model.PendingPets)
                {
                    <div class="col-md-6 col-lg-3" data-aos="zoom-in">
                        <div class="team-card text-center">
                            <div class="team-image">
                                <img src="~/assets/PetImages/@pet.ImgUrl" class="img-fluid" alt="@pet.Name">
                            </div>
                            <div class="team-content pet-info">
                                <h4>
                                    <a asp-controller="Pet" asp-action="PetDetails" asp-route-id="@pet.Id" class="text-decoration-none text-dark">
                                        @pet.Name
                                    </a>
                                </h4>
                                <span>Status: @pet.Status</span><br />

                                <form asp-action="ApprovePet" asp-controller="Admin" method="post" class="mt-3">
                                    @Html.AntiForgeryToken()
                                    <input type="hidden" name="id" value="@pet.Id" />
                                    <button type="submit" class="btn btn-success btn-sm">Approve</button>
                                </form>
                            </div>
                        </div>
                    </div>
                }
            </div>
        }
    </div>
</section>
